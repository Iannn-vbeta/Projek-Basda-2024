import os
from db.database import Database
from src.login import *
from src.mahasiswa import *
db = Database()
db.open()

def clear():
    os.system('cls' if os.name == 'nt' else 'clear')
    
teks_admin = f"""
███╗   ███╗███████╗███╗   ██╗██╗   ██╗   
████╗ ████║██╔════╝████╗  ██║██║   ██║   
██╔████╔██║█████╗  ██╔██╗ ██║██║   ██║   
██║╚██╔╝██║██╔══╝  ██║╚██╗██║██║   ██║   
██║ ╚═╝ ██║███████╗██║ ╚████║╚██████╔╝   
╚═╝     ╚═╝╚══════╝╚═╝  ╚═══╝ ╚═════╝    
                                         
███████╗████████╗ █████╗ ███████╗███████╗
██╔════╝╚══██╔══╝██╔══██╗██╔════╝██╔════╝
███████╗   ██║   ███████║█████╗  █████╗  
╚════██║   ██║   ██╔══██║██╔══╝  ██╔══╝  
███████║   ██║   ██║  ██║██║     ██║     
╚══════╝   ╚═╝   ╚═╝  ╚═╝╚═╝     ╚═╝     
                                           
    
    [ 1 ] View Penhuni         
    [ 2 ] Register Penghuni     
    [ 3 ] View Password
    [ 0 ] Keluar
                                                           
"""

teks_view_penghuni = f"""
                    ██╗     ██╗███████╗████████╗                 
                    ██║     ██║██╔════╝╚══██╔══╝                 
                    ██║     ██║███████╗   ██║                    
                    ██║     ██║╚════██║   ██║                    
                    ███████╗██║███████║   ██║                    
                    ╚══════╝╚═╝╚══════╝   ╚═╝                    
                                                                 
██████╗ ███████╗███╗   ██╗ ██████╗ ██╗  ██╗██╗   ██╗███╗   ██╗██╗
██╔══██╗██╔════╝████╗  ██║██╔════╝ ██║  ██║██║   ██║████╗  ██║██║
██████╔╝█████╗  ██╔██╗ ██║██║  ███╗███████║██║   ██║██╔██╗ ██║██║
██╔═══╝ ██╔══╝  ██║╚██╗██║██║   ██║██╔══██║██║   ██║██║╚██╗██║██║
██║     ███████╗██║ ╚████║╚██████╔╝██║  ██║╚██████╔╝██║ ╚████║██║
╚═╝     ╚══════╝╚═╝  ╚═══╝ ╚═════╝ ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝
                                                                                                                                                                 
"""

teks_view_password = f"""
                    ██╗     ██╗███████╗████████╗                   
                    ██║     ██║██╔════╝╚══██╔══╝                   
                    ██║     ██║███████╗   ██║                      
                    ██║     ██║╚════██║   ██║                      
                    ███████╗██║███████║   ██║                      
                    ╚══════╝╚═╝╚══════╝   ╚═╝                      
                                                                   
██████╗  █████╗ ███████╗███████╗██╗    ██╗ ██████╗ ██████╗ ██████╗ 
██╔══██╗██╔══██╗██╔════╝██╔════╝██║    ██║██╔═══██╗██╔══██╗██╔══██╗
██████╔╝███████║███████╗███████╗██║ █╗ ██║██║   ██║██████╔╝██║  ██║
██╔═══╝ ██╔══██║╚════██║╚════██║██║███╗██║██║   ██║██╔══██╗██║  ██║
██║     ██║  ██║███████║███████║╚███╔███╔╝╚██████╔╝██║  ██║██████╔╝
╚═╝     ╚═╝  ╚═╝╚══════╝╚══════╝ ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═════╝ 

"""

teks_register_penghuni = f"""
██████╗ ███████╗ ██████╗ ██╗███████╗████████╗███████╗██████╗ 
██╔══██╗██╔════╝██╔════╝ ██║██╔════╝╚══██╔══╝██╔════╝██╔══██╗
██████╔╝█████╗  ██║  ███╗██║███████╗   ██║   █████╗  ██████╔╝
██╔══██╗██╔══╝  ██║   ██║██║╚════██║   ██║   ██╔══╝  ██╔══██╗
██║  ██║███████╗╚██████╔╝██║███████║   ██║   ███████╗██║  ██║
╚═╝  ╚═╝╚══════╝ ╚═════╝ ╚═╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝                                                       

"""

# login(db)

def menu_admin():
    print(teks_admin)
    men = None
    while men != "0":
        men = input(f"    [ o ] Pilih menu: ")
        clear()
        match men:
            case "1":
                print(teks_view_penghuni)
                view_all_users(db)
                input("[ x ] Tekan enter untuk kembali")
                clear()
            case "2":
                print(teks_register_penghuni)
                register_user(db)
                input("[ x ] Tekan enter untuk kembali")
                clear()
            case "3":
                print(teks_view_password)
                print(view_password(db))
                input("[ x ] Tekan enter untuk kembali")
                clear()
            case "0":
                os._exit(0)
            case default:
                print("Pilihan tidak tersedia")
        clear()
        menu_admin()
            
def menu_penghuni():
    pass

def menu_pengunjung():
    pass
    
def menu_login():
    try:
        nama_user,role = login(db)
    except:
        nama_user,role = None,None

    if role == "penghuni" :
        print(f"Halo {nama_user}")
    else:
        print(f"Halo Admin {nama_user}")
    
menu_admin()

db.close()
